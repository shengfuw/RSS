gen b1 = substr(bcode, 1, 2)
gen b2 = substr(bcode, 1, 3)
gen b3 = substr(bcode, 1, 4)

gen bc1 = ""
lab var bc1 "11領域"
replace bc1 = "教育領域" if b1 == "01" 
replace bc1 = "藝術及人文領域" if b1 == "02" 
replace bc1 = "社會科學、新聞學及圖書資訊領域" if b1 == "03" 
replace bc1 = "商業、管理及法律領域" if b1 == "04" 
replace bc1 = "自然科學、數學及統計領域" if b1 == "05" 
replace bc1 = "資訊通訊科技領域" if b1 == "06" 
replace bc1 = "工程、製造及營建領域" if b1 == "07" 
replace bc1 = "農業、林業、漁業及獸醫領域" if b1 == "08" 
replace bc1 = "醫藥衛生及社會福利領域" if b1 == "09" 
replace bc1 = "服務領域" if b1 == "10" 
replace bc1 = "其他領域" if b1 == "99" 

replace b1 = substr(bcode, 1, 1) if bc1 == ""
replace b2 = substr(bcode, 1, 2) if bc1 == ""
replace b3 = substr(bcode, 1, 3) if bc1 == ""

replace bc1 = "教育領域" if  b1 == "1"
replace bc1 = "人文及藝術領域" if  b1 == "2"
replace bc1 = "社會科學、商業及法律領域" if  b1 == "3"
replace bc1 = "科學領域" if  b1 == "4"
replace bc1 = "工程、製造及營造領域" if  b1 == "5"
replace bc1 = "農學領域" if  b1 == "6"
replace bc1 = "醫藥衛生及社福領域" if  b1 == "7"
replace bc1 = "服務領域" if  b1 == "8"
replace bc1 = "其他領域" if  b1 == "9"
encode bc1, gen(bcode1)

recode bcode1 (2 = .)(10 11 = 5)(4 5 13 = 6)(16 17= 7)(14 15= 8)(1 12 = 1)(8 9 3 = 2)(6 = 3)(7 = 4) ,gen(bcode1_new) 
lab define bcode1_new 1"人文及藝術領域" 2"社會科學、商業及法律領域" 3"教育領域" 4"服務領域"  5"科學領域" 6"工程、製造及營造領域" 7"醫藥衛生及社會福利領域" 8"農業、林業、漁業及獸醫領域" 9"其他領域"
lab value bcode1_new bcode1_new

recode bcode1_new (1/4=1)(5 6=2)(7 8=3),gen(field) 
lab define field 1"文組" 2"理組" 3"生物相關"
lab value field field

recode bcode1_new (1/4=1)(5/8=0),gen(field2) 
lab define field2 1"文組" 0"理組（含生物相關）" 
lab value field2 field2

gen bc2 = ""
lab var bc2 "27學門"
replace bc2 = "教育學門" if  b2 == "14"
replace bc2 = "藝術學門" if  b2 == "18"
replace bc2 = "人文學門" if  b2 == "22"
replace bc2 = "經社及心理學門" if  b2 == "30"
replace bc2 = "大眾傳播學門" if  b2 == "84"
replace bc2 = "商業及管理學門" if  b2 == "34"
replace bc2 = "法律學門" if  b2 == "38"
replace bc2 = "自然科學門" if  b2 == "42"
replace bc2 = "數學及電算機科學門" if  b2 == "46"
replace bc2 = "工程學門" if  b2 == "54"
replace bc2 = "工業技藝學門" if  b2 == "52"
replace bc2 = "建築及都市規劃學門" if  b2 == "58"
replace bc2 = "農林漁牧學門" if  b2 == "62"
replace bc2 = "醫藥衛生學門" if  b2 == "50"
replace bc2 = "觀光服務學門" if  b2 == "78"
replace bc2 = "運輸通信學門" if  b2 == "70"
replace bc2 = "其他學門" if  b2 == "89"

replace bc2 = "教育學門" if  b2 == "14"
replace bc2 = "藝術學門" if  b2 == "21"
replace bc2 = "人文學門" if  b2 == "22"
replace bc2 = "設計學門" if  b2 == "23"
replace bc2 = "社會及行為科學學門" if  b2 == "31"
replace bc2 = "傳播學門" if  b2 == "32"
replace bc2 = "商業及管理學門" if  b2 == "34"
replace bc2 = "法律學門" if  b2 == "38"
replace bc2 = "生命科學學門" if  b2 == "42"
replace bc2 = "自然科學學門" if  b2 == "44"
replace bc2 = "數學及統計學門" if  b2 == "46"
replace bc2 = "電算機學門" if  b2 == "48"
replace bc2 = "工程學門" if  b2 == "52"
replace bc2 = "建築及都市規劃學門" if  b2 == "58"
replace bc2 = "農業科學學門" if  b2 == "62"
replace bc2 = "獸醫學門" if  b2 == "64"
replace bc2 = "醫藥衛生學門" if  b2 == "72"
replace bc2 = "社會服務學門" if  b2 == "76"
replace bc2 = "民生學門" if  b2 == "81"
replace bc2 = "運輸服務學門" if  b2 == "84"
replace bc2 = "環境保護學門" if  b2 == "85"
replace bc2 = "軍警國防安全學門" if  b2 == "86"
replace bc2 = "其他學門" if  b2 == "99"

replace bc2 = "教育學門" if  b2 == "011"
replace bc2 = "藝術學門" if  b2 == "021"
replace bc2 = "人文學門" if  b2 == "022"
replace bc2 = "語文學門" if  b2 == "023"
replace bc2 = "社會及行為科學學門" if  b2 == "031"
replace bc2 = "新聞學及圖書資訊學門" if  b2 == "032"
replace bc2 = "商業及管理學門" if  b2 == "041"
replace bc2 = "法律學門" if  b2 == "042"
replace bc2 = "生命科學學門" if  b2 == "051"
replace bc2 = "環境學門" if  b2 == "052"
replace bc2 = "物理、化學及地球科學學門" if  b2 == "053"
replace bc2 = "數學及統計學門" if  b2 == "054"
replace bc2 = "資訊通訊科技學門" if  b2 == "061"
replace bc2 = "工程及工程業學門" if  b2 == "071"
replace bc2 = "製造及加工學門" if  b2 == "072"
replace bc2 = "建築及營建工程學門" if  b2 == "073"
replace bc2 = "農業學門" if  b2 == "081"
replace bc2 = "林業學門" if  b2 == "082"
replace bc2 = "漁業學門" if  b2 == "083"
replace bc2 = "獸醫學門" if  b2 == "084"
replace bc2 = "醫藥衛生學門" if  b2 == "091"
replace bc2 = "社會福利學門" if  b2 == "092"
replace bc2 = "餐旅及民生服務學門" if  b2 == "101"
replace bc2 = "衛生及職業衛生服務學門" if  b2 == "102"
replace bc2 = "安全服務學門" if  b2 == "103"
replace bc2 = "運輸服務學門" if  b2 == "104"
replace bc2 = "其他學門" if  b2 == "999"
encode bc2, gen(bcode2)
		  
recode bcode2 (8=1)(21=2)(1 24=3)(18 20=4)(10=5)(3=6)(12=7)(17=8)(16=9)(14=10)(9=11)(25=12)(5 6=13)(23=14)(7=15)(26 11 13=16)(15=17)(29=18)(19=19)(30=20)(22=21)(4=22)(27 28=23)(2=24) ,gen(bcode2_new) 
lab define bcode2_new 1"教育學門" 2"藝術學門" 3"人文及語言學門" 4"社會及行為科學學門" 5"新聞學及圖書資訊學門" 6"商業及管理學門" 7"法律學門" 8"生命科學學門" 9"環境學門" 10"物理、化學及地球科學學門" 11"數學及統計學門" 12"資訊通訊科技學門" 13"工程及工程業學門" 14"製造及加工學門" 15"建築及營建工程學門" 16"農業科學學門" 17"獸醫學門" 18 "醫藥衛生學門" 19"社會福利學門" 20"餐旅、民生服務學門" 21"衛生及職業衛生服務學門" 22"安全服務學門" 23"運輸服務學門"	24"其他學門"
lab value bcode2_new bcode2_new

gen bc3 = ""
lab var bc3 "93學類"

replace bc3 = "綜合教育學類" if  b3 == "1401"
replace bc3 = "普通科目教育學類" if  b3 == "1402"
replace bc3 = "專業科目教育學類" if  b3 == "1403"
replace bc3 = "學前教育學類" if  b3 == "1404"
replace bc3 = "成人教育學類" if  b3 == "1405"
replace bc3 = "特殊教育學類" if  b3 == "1406"
replace bc3 = "教育行政學類" if  b3 == "1407"
replace bc3 = "教育科技學類" if  b3 == "1408"
replace bc3 = "教育測驗評量學類" if  b3 == "1409"
replace bc3 = "其他教育學類" if  b3 == "1499"
replace bc3 = "美術學類" if  b3 == "2101"
replace bc3 = "雕塑藝術學類" if  b3 == "2102"
replace bc3 = "美術工藝學類" if  b3 == "2103"
replace bc3 = "音樂學類" if  b3 == "2104"
replace bc3 = "戲劇舞蹈學類" if  b3 == "2105"
replace bc3 = "視覺藝術學類" if  b3 == "2106"
replace bc3 = "綜合藝術學類" if  b3 == "2107"
replace bc3 = "民俗藝術學類" if  b3 == "2108"
replace bc3 = "應用藝術學類" if  b3 == "2109"
replace bc3 = "藝術行政學類" if  b3 == "2110"
replace bc3 = "台灣語文學類" if  b3 == "2201"
replace bc3 = "中國語文學類" if  b3 == "2202"
replace bc3 = "外國語文學類" if  b3 == "2203"
replace bc3 = "其他語文學類" if  b3 == "2204"
replace bc3 = "翻譯學類" if  b3 == "2205"
replace bc3 = "比較文學學類" if  b3 == "2206"
replace bc3 = "語言學類" if  b3 == "2207"
replace bc3 = "宗教學類" if  b3 == "2208"
replace bc3 = "歷史學類" if  b3 == "2209"
replace bc3 = "人類學學類" if  b3 == "2210"
replace bc3 = "哲學學類" if  b3 == "2211"
replace bc3 = "文獻學學類" if  b3 == "2212"
replace bc3 = "其他人文學類" if  b3 == "2299"
replace bc3 = "綜合設計學類" if  b3 == "2301"
replace bc3 = "視覺傳達設計學類" if  b3 == "2302"
replace bc3 = "產品設計學類" if  b3 == "2303"
replace bc3 = "空間設計學類" if  b3 == "2304"
replace bc3 = "其他設計學類" if  b3 == "2399"
replace bc3 = "經濟學類" if  b3 == "3101"
replace bc3 = "社會學類" if  b3 == "3103"
replace bc3 = "民族學類" if  b3 == "3104"
replace bc3 = "心理學類" if  b3 == "3105"
replace bc3 = "地理學類" if  b3 == "3106"
replace bc3 = "區域研究學類" if  b3 == "3107"
replace bc3 = "公共行政學類" if  b3 == "3108"
replace bc3 = "國際事務學類" if  b3 == "3109"
replace bc3 = "綜合社會及行為科學學類" if  b3 == "3110"
replace bc3 = "一般大眾傳播學類" if  b3 == "3201"
replace bc3 = "新聞學類" if  b3 == "3202"
replace bc3 = "廣播電視學類" if  b3 == "3203"
replace bc3 = "公共關係學類" if  b3 == "3204"
replace bc3 = "博物館學類" if  b3 == "3205"
replace bc3 = "圖書資訊檔案學類" if  b3 == "3206"
replace bc3 = "圖文傳播學類" if  b3 == "3207"
replace bc3 = "廣告學類" if  b3 == "3208"
replace bc3 = "其他傳播及資訊學類" if  b3 == "3299"
replace bc3 = "一般商業學類" if  b3 == "3401"
replace bc3 = "會計學類" if  b3 == "3402"
replace bc3 = "企業管理學類" if  b3 == "3403"
replace bc3 = "貿易學類" if  b3 == "3404"
replace bc3 = "財務金融學類" if  b3 == "3405"
replace bc3 = "風險管理學類" if  b3 == "3406"
replace bc3 = "財政學類" if  b3 == "3407"
replace bc3 = "行銷與流通學類" if  b3 == "3408"
replace bc3 = "醫管學類" if  b3 == "3409"
replace bc3 = "其他商業及管理學類" if  b3 == "3499"
replace bc3 = "一般法律學類" if  b3 == "3801"
replace bc3 = "專業法律學類" if  b3 == "3802"
replace bc3 = "其他法律學類" if  b3 == "3899"
replace bc3 = "生物學類" if  b3 == "4201"
replace bc3 = "生態學類" if  b3 == "4202"
replace bc3 = "生物科技學類" if  b3 == "4203"
replace bc3 = "微生物學類" if  b3 == "4204"
replace bc3 = "生物化學學類" if  b3 == "4205"
replace bc3 = "生物訊息學類" if  b3 == "4206"
replace bc3 = "其他生命科學類" if  b3 == "4299"
replace bc3 = "化學學類" if  b3 == "4401"
replace bc3 = "地球科學學類" if  b3 == "4402"
replace bc3 = "大氣科學學類" if  b3 == "4404"
replace bc3 = "海洋科學學類" if  b3 == "4405"
replace bc3 = "天文及太空科學學類" if  b3 == "4406"
replace bc3 = "其他自然科學學類" if  b3 == "4499"
replace bc3 = "數學學類" if  b3 == "4601"
replace bc3 = "統計學類" if  b3 == "4602"
replace bc3 = "其他數學及統計學類" if  b3 == "4699"
replace bc3 = "電算機一般學類" if  b3 == "4801"
replace bc3 = "網路學類" if  b3 == "4802"
replace bc3 = "軟體發展學類" if  b3 == "4803"
replace bc3 = "系統設計學類" if  b3 == "4804"
replace bc3 = "電算機應用學類" if  b3 == "4805"
replace bc3 = "其他電算機學類" if  b3 == "4899"
replace bc3 = "電資工程學類" if  b3 == "5201"
replace bc3 = "機械工程學類" if  b3 == "5202"
replace bc3 = "土木工程學類" if  b3 == "5203"
replace bc3 = "化學工程學類" if  b3 == "5204"
replace bc3 = "材料工程學類" if  b3 == "5205"
replace bc3 = "工業工程學類" if  b3 == "5206"
replace bc3 = "紡織工程學類" if  b3 == "5207"
replace bc3 = "測量工程學類" if  b3 == "5208"
replace bc3 = "環境工程學類" if  b3 == "5209"
replace bc3 = "河海工程學類" if  b3 == "5210"
replace bc3 = "生醫工程學類" if  b3 == "5211"
replace bc3 = "核子工程學類" if  b3 == "5212"
replace bc3 = "綜合工程學類" if  b3 == "5213"
replace bc3 = "其他工程學類" if  b3 == "5299"
replace bc3 = "建築學類" if  b3 == "5801"
replace bc3 = "景觀設計學類" if  b3 == "5802"
replace bc3 = "都巿規劃學類" if  b3 == "5803"
replace bc3 = "其他建築及都巿規劃學類" if  b3 == "5899"
replace bc3 = "一般農業學類" if  b3 == "6201"
replace bc3 = "畜牧學類" if  b3 == "6202"
replace bc3 = "園藝學類" if  b3 == "6203"
replace bc3 = "植物保護學類" if  b3 == "6204"
replace bc3 = "農業經濟及推廣學類" if  b3 == "6205"
replace bc3 = "食品科學類" if  b3 == "6206"
replace bc3 = "水土保持學類" if  b3 == "6207"
replace bc3 = "農業化學類" if  b3 == "6208"
replace bc3 = "林業學類" if  b3 == "6210"
replace bc3 = "漁業學類" if  b3 == "6211"
replace bc3 = "其他農林漁牧學類" if  b3 == "6299"
replace bc3 = "獸醫學類" if  b3 == "6401"
replace bc3 = "醫學學類" if  b3 == "7201"
replace bc3 = "公共衛生學類" if  b3 == "7202"
replace bc3 = "藥學學類" if  b3 == "7203"
replace bc3 = "復健醫學學類" if  b3 == "7204"
replace bc3 = "營養學類" if  b3 == "7205"
replace bc3 = "護理學類" if  b3 == "7206"
replace bc3 = "醫學技術及檢驗學類" if  b3 == "7207"
replace bc3 = "牙醫學類" if  b3 == "7208"
replace bc3 = "其他醫藥衛生學類" if  b3 == "7299"
replace bc3 = "身心障礙服務學類" if  b3 == "7601"
replace bc3 = "老年服務學類" if  b3 == "7602"
replace bc3 = "社會工作學類" if  b3 == "7603"
replace bc3 = "兒童保育學類" if  b3 == "7604"
replace bc3 = "其他社會服務學類" if  b3 == "7699"
replace bc3 = "餐旅服務學類" if  b3 == "8101"
replace bc3 = "觀光休閒學類" if  b3 == "8102"
replace bc3 = "競技運動學類" if  b3 == "8103"
replace bc3 = "運動科技學類" if  b3 == "8104"
replace bc3 = "運動休閒及休閒管理學類" if  b3 == "8105"
replace bc3 = "生活應用科學學類" if  b3 == "8106"
replace bc3 = "服飾學類" if  b3 == "8107"
replace bc3 = "美容學類" if  b3 == "8108"
replace bc3 = "其他民生學類" if  b3 == "8199"
replace bc3 = "運輸管理學類" if  b3 == "8401"
replace bc3 = "航空學類" if  b3 == "8402"
replace bc3 = "航海學類" if  b3 == "8403"
replace bc3 = "其他運輸服務學類" if  b3 == "8499"
replace bc3 = "環境資源學類" if  b3 == "8501"
replace bc3 = "環境防災學類" if  b3 == "8502"
replace bc3 = "其他環境保護學類" if  b3 == "8599"
replace bc3 = "警政學類" if  b3 == "8601"
replace bc3 = "軍事學類" if  b3 == "8602"
replace bc3 = "其他軍警國防安全學類" if  b3 == "8699"
replace bc3 = "其他不能歸類之各學類" if  b3 == "9901"

replace bc3 = "教育學學類" if  b3 == "0111"
replace bc3 = "幼兒師資教育學類" if  b3 == "0112"
replace bc3 = "普通科目師資教育學類" if  b3 == "0113"
replace bc3 = "專業科目師資教育學類" if  b3 == "0114"
replace bc3 = "其他教育學類" if  b3 == "0119"
replace bc3 = "視聽技術及媒體製作學類" if  b3 == "0211"
replace bc3 = "時尚、室內設計及工業設計學類" if  b3 == "0212"
replace bc3 = "美術學類" if  b3 == "0213"
replace bc3 = "手工藝學類" if  b3 == "0214"
replace bc3 = "音樂及表演藝術學類" if  b3 == "0215"
replace bc3 = "其他藝術學類" if  b3 == "0219"
replace bc3 = "宗教學類" if  b3 == "0221"
replace bc3 = "歷史及考古學學類" if  b3 == "0222"
replace bc3 = "哲學學類" if  b3 == "0223"
replace bc3 = "其他人文學類" if  b3 == "0229"
replace bc3 = "外國語文學學類" if  b3 == "0231"
replace bc3 = "本國語文學學類" if  b3 == "0232"
replace bc3 = "其他語文學類" if  b3 == "0239"
replace bc3 = "經濟學學類" if  b3 == "0311"
replace bc3 = "政治學及相關學類" if  b3 == "0312"
replace bc3 = "心理學學類" if  b3 == "0313"
replace bc3 = "社會學及相關學類" if  b3 == "0314"
replace bc3 = "其他社會及行為科學學類" if  b3 == "0319"
replace bc3 = "新聞學及傳播相關學類" if  b3 == "0321"
replace bc3 = "圖書館、資訊及檔案研究學類" if  b3 == "0322"
replace bc3 = "其他新聞學及圖書資訊學類" if  b3 == "0329"
replace bc3 = "會計及稅務學類" if  b3 == "0411"
replace bc3 = "金融、銀行業及保險學類" if  b3 == "0412"
replace bc3 = "管理及行政學類" if  b3 == "0413"
replace bc3 = "國際貿易、市場行銷及廣告學類" if  b3 == "0414"
replace bc3 = "批發及零售學類" if  b3 == "0416"
replace bc3 = "其他商業及管理學類" if  b3 == "0419"
replace bc3 = "法律學類" if  b3 == "0421"
replace bc3 = "其他法律學類" if  b3 == "0429"
replace bc3 = "生物學學類" if  b3 == "0511"
replace bc3 = "生物化學及相關學類" if  b3 == "0512"
replace bc3 = "其他生命科學學類" if  b3 == "0519"
replace bc3 = "環境科學學類" if  b3 == "0521"
replace bc3 = "自然環境及野生動物學類" if  b3 == "0522"
replace bc3 = "其他環境學類" if  b3 == "0529"
replace bc3 = "化學學類" if  b3 == "0531"
replace bc3 = "地球科學學類" if  b3 == "0532"
replace bc3 = "物理學類" if  b3 == "0533"
replace bc3 = "其他物理、化學及地球科學學類" if  b3 == "0539"
replace bc3 = "數學學類" if  b3 == "0541"
replace bc3 = "統計學類" if  b3 == "0542"
replace bc3 = "其他數學及統計學類" if  b3 == "0549"
replace bc3 = "電腦運用學類" if  b3 == "0611"
replace bc3 = "資料庫、網路設計及管理學類" if  b3 == "0612"
replace bc3 = "軟體及應用的開發與分析學類" if  b3 == "0613"
replace bc3 = "其他資訊通訊科技學類" if  b3 == "0619"
replace bc3 = "化學工程及製程學類" if  b3 == "0711"
replace bc3 = "環境保護科技學類" if  b3 == "0712"
replace bc3 = "電力及能源學類" if  b3 == "0713"
replace bc3 = "電機與電子工程學類" if  b3 == "0714"
replace bc3 = "機械工程學類" if  b3 == "0715"
replace bc3 = "機動車輛、船舶及飛機學類" if  b3 == "0716"
replace bc3 = "其他工程及工程業學類" if  b3 == "0719"
replace bc3 = "食品科學學類" if  b3 == "0721"
replace bc3 = "紡織品學類" if  b3 == "0723"
replace bc3 = "採礦及提煉學類" if  b3 == "0724"
replace bc3 = "建築學及城鎮規劃學類" if  b3 == "0731"
replace bc3 = "營建及土木工程學類" if  b3 == "0732"
replace bc3 = "其他建築及營建工程學類" if  b3 == "0739"
replace bc3 = "農作物及畜牧生產學類" if  b3 == "0811"
replace bc3 = "園藝學類" if  b3 == "0812"
replace bc3 = "其他農業學類" if  b3 == "0819"
replace bc3 = "林業學類" if  b3 == "0821"
replace bc3 = "漁業學類" if  b3 == "0831"
replace bc3 = "獸醫學類" if  b3 == "0841"
replace bc3 = "牙醫學類" if  b3 == "0911"
replace bc3 = "醫學學類" if  b3 == "0912"
replace bc3 = "護理及助產學類" if  b3 == "0913"
replace bc3 = "醫學技術及檢驗學類" if  b3 == "0914"
replace bc3 = "治療及復健學類" if  b3 == "0915"
replace bc3 = "藥學學類" if  b3 == "0916"
replace bc3 = "傳統醫學、輔助醫學及治療學類" if  b3 == "0917"
replace bc3 = "其他醫藥衛生學類" if  b3 == "0919"
replace bc3 = "老年人及失能成人照顧學類" if  b3 == "0921"
replace bc3 = "兒童及青少年照顧服務學類" if  b3 == "0922"
replace bc3 = "社會工作學類" if  b3 == "0923"
replace bc3 = "其他社會福利學類" if  b3 == "0929"
replace bc3 = "家政服務學類" if  b3 == "1011"
replace bc3 = "美髮美容服務學類" if  b3 == "1012"
replace bc3 = "旅館及餐飲學類" if  b3 == "1013"
replace bc3 = "運動學類" if  b3 == "1014"
replace bc3 = "旅遊觀光及休閒學類" if  b3 == "1015"
replace bc3 = "其他餐旅及民生服務學類" if  b3 == "1019"
replace bc3 = "職業衛生及安全學類" if  b3 == "1022"
replace bc3 = "警政學類" if  b3 == "1032"
replace bc3 = "運輸服務學類" if  b3 == "1041"
replace bc3 = "其他運輸服務學類" if  b3 == "1049"
replace bc3 = "其他學類" if  b3 == "9999"
encode bc3, gen(bcode3)
